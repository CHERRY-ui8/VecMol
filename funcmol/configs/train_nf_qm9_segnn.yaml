defaults:
  - dset: qm9
  - converter: gnf_converter_qm9
  - encoder: segnn_encoder  # 使用SEGNN encoder
  - decoder: segnn_decoder  # 使用SEGNN decoder
  - override hydra/job_logging: custom
  - _self_

debug: False
debug_one_mol: False
debug_subset: False
wandb: False
seed: 1234
exp_dir: ../exps/neural_field
exp_name: "nf_segnn_${dset.dset_name}/${now:%Y%m%d}"
dirname: "${exp_dir}/${exp_name}"

reload_model_path: null
auto_resume: True

# training params
ckpt_every_n_epochs: 1
n_epochs: 1000
eval_every: 1

# Learning rate scheduler configuration
lr_decay: True
lr_scheduler_type: "plateau"

# Warmup configuration
warmup:
  enabled: False
  warmup_steps: 10000

# ReduceLROnPlateau parameters
lr_factor: 0.8
lr_patience: 5
lr_min: 1e-6
lr_mode: "min"

# MultiStepLR parameters
lr_milestones: [30, 60, 90]
lr_gamma: 0.5

# Fine-tuning settings
finetune_decoder:
  enabled: False
  freeze_encoder: False
  use_denoiser_for_codes: False
  denoiser_checkpoint_path: null
  sample_near_atoms_only: False
  atom_distance_threshold: 1
  n_points: 500
  cosine_loss_weight: 1.0
  length_loss_weight: 1.0
  max_timestep_for_decoder: 10
  real_code_ratio: 1
  code_augmentation:
    enabled: False
    noise_std: 0.003

# Loss weighting
loss_weighting:
  enabled: False
  mode: "inverse_square"
  atom_distance_scale: 0.3
  inverse_square_epsilon: 1e-3
  grid_loss_weight: 1.0
  neighbor_loss_weight: 1.0

# set the running dir
hydra:
  run:
    dir: ${dirname}
