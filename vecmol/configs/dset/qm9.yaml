dset_name: qm9
data_dir: dataset/data
data_aug: True
grid_dim: 48 # 48*0.25=12，差不多是qm9里的分子的最大直径（之所以是直径，是因为在求scale_factor的时候，缩放比例是1/（resolution*grid_dim/2））
resolution: .25

# grid_size: 9  # 统一的grid_size参数，用于编码器和解码器 # NOTE: 记得后续可以变回11
# anchor_spacing: 1.5  # 锚点间距，单位为埃（之前用的1.5 # NOTE: 记得后续可以变回1
grid_size: 5
anchor_spacing: 3

elements: ["C", "H", "O", "N", "F"]
n_channels: 5
n_points: 500 # 在 FieldDataset 的 _get_xs 方法中使用。之前训练都设置的是500，可能小了
subsampling_ratio: 2

# Query points sampling configuration
# targeted_sampling_ratio: grid点和邻近点的比例 (n_grid / n_neighbor)
targeted_sampling_ratio: 0.5  # 默认值：grid点:邻近点 = 2:1

# atom_distance_threshold: 只采样距离原子多少Å内的query points（单位：Å）
# 当启用sample_near_atoms_only时使用此参数
# 如果未设置，将从joint_finetune配置中读取，最后使用默认值0.5
atom_distance_threshold: 1.0

num_workers: 8
batch_size: 16
lr_enc: 2e-4
lr_dec: 2e-4 # 非微调模式下是2e-4

# Code / LMDB 数据相关（train_fm 等使用）
# num_augmentations: 选择 LMDB 的单一来源，train_fm 从 dset 读取
smooth_sigma: 0.5
normalize_codes: 1
on_the_fly: False  # use True to compute codes on the fly from neural field
use_augmented_codes: False
num_augmentations: 1  # null 或具体数字，用于 codes_aug{N}.lmdb

# 位置权重（train_fm 等使用，可被顶层 config 覆盖）
position_weight:
  enabled: False
  radius: 3.0
  alpha: 0.5
# use_sharded_lmdb 未设置则自动检测
codes_dir_no_aug: "exps/neural_field/nf_qm9/20260124/lightning_logs/version_0/checkpoints/code_no_aug/"
codes_dir_with_aug: "exps/neural_field/nf_qm9/20260124/lightning_logs/version_0/checkpoints/codes_no_shuffle/"
# code_stats_path: (可选)
